<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="description" content="小庄 http://github.com/JiaRui10" />
<title>新建网页</title>
<style>
	#div1 {
		width: 100px;
		height: 100px;
		background: red;
		position: absolute;
		top: 50px;
		left: 30px;
	}
</style>
</head>
    <body>
    	<input type="button" id="btn1" value="往前">

        <!-- 1、 -->
        <input type="button" id="btn2" value="往后">

    	<div id="div1"></div>

    	<script>
    		var oBtn1 = document.getElementById("btn1");

            // 2
            var oBtn2 = document.getElementById("btn2");

    		var oDiv = document.getElementById("div1");

    		
    		oBtn1.onclick = function(){
                // 5
    			// clearInterval(oDiv.timer);

    			// oDiv.timer  = setInterval(function(){
    			// 	var speed = parseInt(getStyle(oDiv , "left")) + 29;   // 步长

    			// 	if(speed > 800){
    			// 		speed = 800;
    			// 	}

    			// 	oDiv.style.left = speed + "px";

    			// 	if(speed == 800){
    			// 		clearInterval(oDiv.timer);
    			// 		alert(speed);
    			// 	}
    			// } , 30);
                doMove(oDiv , 12 , 800);
    		};

    		function getStyle(obj , attr){
    			return obj.currentStyle?obj.currentStyle[attr]:getComputedStyle(obj)[attr];
    		}


            // 3
            oBtn2.onclick = function(){
                // 6
                // clearInterval(oDiv.timer);

                // oDiv.timer  = setInterval(function(){
                //     var speed = parseInt(getStyle(oDiv , "left")) - 29;   // 步长

                //     if(speed < 10){
                //         speed = 10;
                //     }

                //     oDiv.style.left = speed + "px";

                //     if(speed == 10){
                //         clearInterval(oDiv.timer);
                //         alert(speed);
                //     }
                // } , 30);
                doMove(oDiv , -10 , 10);
            };

            // 4、因为两个按钮的点击事件有很多相似的地方，所以可以用函数封装起来
            function doMove(obj , dir , target){
                clearInterval(obj.timer);

                obj.timer  = setInterval(function(){
                    var speed = parseInt(getStyle(obj , "left")) + dir;   // 步长

                    // 7、因为大小于号不能进行传参，所以在函数里面写死
                    if(speed > target && dir>0){    // 往前跑
                        speed = target;
                    }
                    if(speed < target && dir<0){
                        speed = target;
                    }

                    obj.style.left = speed + "px";

                    if(speed == target){
                        clearInterval(obj.timer);
                        alert(speed);
                    }
                } , 30);
            }
    	</script>
    </body>
</html>